cmake_minimum_required(VERSION 2.8.6)

add_custom_command(OUTPUT pcbuild
  COMMAND ${NODE_BIN} ${NODE_GYP} --nodedir=${NODE_DIR} configure
  WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR})

add_custom_target(ProcessChain ALL
  COMMAND ${NODE_BIN} ${NODE_GYP} build
  DEPENDS pcbuild
  WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
  SOURCES ProcessChain.cpp ProcessChain.h binding.gyp index.js)

