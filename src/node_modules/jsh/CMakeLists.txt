cmake_minimum_required(VERSION 2.8.6)

add_custom_command(OUTPUT jshbuild
  COMMAND node-gyp configure
  WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR})

add_custom_target(jsh ALL
  COMMAND node-gyp build
  DEPENDS jshbuild
  WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
  SOURCES jsh.cpp jsh.h binding.gyp index.js)
