function Completion()
{
    this._comps = [];
}

Completion.prototype.complete = function(data)
{
    var ret, len = this._comps.length;
    for (var idx = len - 1; idx >= 0; --idx) {
        ret = this._comps[idx](data);
        if (ret !== undefined)
            return ret;
    }
    return undefined;
};

Completion.prototype.register = function(cb)
{
    if (typeof cb !== "function") {
        throw "Completion.register needs a function argument";
    }
    this._comps.push(cb);
};

module.exports = {
    Completion: Completion
};
